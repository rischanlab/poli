<?phpclass Input extends CI_Controller  {	function __construct()	{		parent::__construct();		$this->load->library(array('Pagination','form_validation','session','image_lib','FPDF'));		$this->load->helper(array('form','url', 'text_helper','date','file','csv'));		$this->load->database();		$this->load->model('Input_model');		session_start();	}		function index(){			$session=isset($_SESSION['admin']) ? $_SESSION['admin']:'';			if($session!=""){					$pecah=explode("|",$session);					$status = $data["STATUS"] = $pecah[2];						if($data["STATUS"]=="Admin"){				$this->load->view('input/index');			}			else{				?><script type="text/javascript" language="javascript">			alert("Anda tidak berhak masuk ke Control Panel Admin...!!!");			</script><?phpecho "<meta http-equiv='refresh' content='0; url=".base_url()."login'>";			}		}		else{			?><script type="text/javascript" language="javascript">		alert("Anda belum Log In...!!!\nAnda harus Log In untuk mengakses halaman ini...!!!");		</script><?phpecho "<meta http-equiv='refresh' content='0; url=".base_url()."login'>";		}			}		function insert(){			$nim = $this->input->post('nim');		$_SESSION['nim']=$nim;		$url_api = "http://localhost/lpm/admin/cobajson/";		$this->load->library('form_validation');		$this->form_validation->set_rules('nim', 'Nim', 'required');				if ($this->form_validation->run() == FALSE)		{			$this->load->view('input/index');		}		else		{				$hasil=file_get_contents($url_api.$nim);			$datajson=json_decode($hasil);			if ($datajson != null){				$data = array('datajson'=> $datajson);				$this->load->view('input/showdata',$data);			}else {				echo "<meta http-equiv='refresh' content='0; url=".base_url()."input'>";						}								}				}		function simpan(){			$this->load->library('form_validation');		$this->form_validation->set_rules('gol_darah', 'Golongan Darah', 'required');		$this->form_validation->set_rules('ketsehat', 'Keterangan Sehat', 'required');		if ($this->form_validation->run() == FALSE)		{			$this->load->view('input/index');		}		else		{	$this->db = $this->load->database('poli', TRUE);			$this->load->model('Input_Model','',TRUE);			$mhs = array( 	'NAMA' => $this->input->post('nama',TRUE),					'NIM' => $this->input->post('nim',TRUE),					'FAK' => $this->input->post('fak'),					'PRODI' => $this->input->post('prodi'),					'GOL_DARAH' => $this->input->post('gol_darah'),					'STATUS_SEHAT' => $this->input->post('ketsehat'),					'KET' => $this->input->post('ket')					);								$cek = $this->Input_Model->cek_data_ada_tidak($_SESSION['nim']);					if (count($cek->result_array())>0){						?>												<script type="text/javascript">												alert("Data Sudah Terisi sebelumnya, jika anda ingin mengubahnya, masuk ke halaman edit data..!!!");													window.location = "http://localhost/poli/input"												</script>												<?php										}else {					$this->Input_Model->insert_data_to_poli($mhs);								?>												<script type="text/javascript">												alert("Data Berhasil di Simpan..!!!");													window.location = "http://localhost/poli/input"												</script>												<?php										}																			}			}}?>